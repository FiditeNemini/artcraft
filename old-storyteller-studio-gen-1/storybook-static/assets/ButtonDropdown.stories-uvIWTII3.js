import{j as f}from"./jsx-runtime-BnIj46N_.js";import{r as p,R as Q}from"./index-CsdIBAqE.js";import{e as ne,F as re,g as oe}from"./index-BeLTwFsi.js";import{B as O}from"./Button-CeLEige6.js";import{l as R,o as ae,a as x,O as K,U as T,y as N,b as ie,s as se,u as Z,c as B,C as M,I as q,p as ee,n as le,f as ue,h as ce,T as de,g as b,r as me,i as A,_ as pe,M as H,j as te,k as fe,q as ve,m as ge}from"./TransitionDialogue-BWOtE-kZ.js";import{w as be}from"./decorator-BcxtDL0x.js";import"./index-MS7LKRHD.js";import"./bundle-mjs-Du4_Do6r.js";import"./index-5f0m1pej.js";import"./v4-D8aEg3BZ.js";function V(e){var r;if(e.type)return e.type;let t=(r=e.as)!=null?r:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function ye(e,r){let[t,o]=p.useState(()=>V(e));return R(()=>{o(V(e))},[e.type,e.as]),R(()=>{t||r.current&&r.current instanceof HTMLButtonElement&&!r.current.hasAttribute("type")&&o("button")},[t,r]),t}function W(e){return[e.screenX,e.screenY]}function xe(){let e=p.useRef([-1,-1]);return{wasMoved(r){let t=W(r);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(r){e.current=W(r)}}}function he({container:e,accept:r,walk:t,enabled:o=!0}){let i=p.useRef(r),n=p.useRef(t);p.useEffect(()=>{i.current=r,n.current=t},[r,t]),R(()=>{if(!e||!o)return;let s=ae(e);if(!s)return;let a=i.current,d=n.current,c=Object.assign(m=>a(m),{acceptNode:a}),u=s.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,c,!1);for(;u.nextNode();)d(u.currentNode)},[e,o,i,n])}function Ie(e){throw new Error("Unexpected object: "+e)}var h=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(h||{});function Pe(e,r){let t=r.resolveItems();if(t.length<=0)return null;let o=r.resolveActiveIndex(),i=o??-1;switch(e.focus){case 0:{for(let n=0;n<t.length;++n)if(!r.resolveDisabled(t[n],n,t))return n;return o}case 1:{for(let n=i-1;n>=0;--n)if(!r.resolveDisabled(t[n],n,t))return n;return o}case 2:{for(let n=i+1;n<t.length;++n)if(!r.resolveDisabled(t[n],n,t))return n;return o}case 3:{for(let n=t.length-1;n>=0;--n)if(!r.resolveDisabled(t[n],n,t))return n;return o}case 4:{for(let n=0;n<t.length;++n)if(r.resolveId(t[n],n,t)===e.id)return n;return o}case 5:return null;default:Ie(e)}}let G=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function J(e){var r,t;let o=(r=e.innerText)!=null?r:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return o;let n=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),n=!0;let s=n?(t=i.innerText)!=null?t:"":o;return G.test(s)&&(s=s.replace(G,"")),s}function De(e){let r=e.getAttribute("aria-label");if(typeof r=="string")return r.trim();let t=e.getAttribute("aria-labelledby");if(t){let o=t.split(" ").map(i=>{let n=document.getElementById(i);if(n){let s=n.getAttribute("aria-label");return typeof s=="string"?s.trim():J(n).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return J(e).trim()}function Re(e){let r=p.useRef(""),t=p.useRef("");return x(()=>{let o=e.current;if(!o)return"";let i=o.innerText;if(r.current===i)return t.current;let n=De(o).trim().toLowerCase();return r.current=i,t.current=n,n})}var we=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(we||{}),Ce=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ce||{}),ke=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(ke||{});function $(e,r=t=>t){let t=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,o=fe(r(e.items.slice()),n=>n.dataRef.current.domRef.current),i=t?o.indexOf(t):null;return i===-1&&(i=null),{items:o,activeItemIndex:i}}let Fe={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,r)=>{var t;let o=$(e),i=Pe(r,{resolveItems:()=>o.items,resolveActiveIndex:()=>o.activeItemIndex,resolveId:n=>n.id,resolveDisabled:n=>n.dataRef.current.disabled});return{...e,...o,searchQuery:"",activeItemIndex:i,activationTrigger:(t=r.trigger)!=null?t:1}},3:(e,r)=>{let t=e.searchQuery!==""?0:1,o=e.searchQuery+r.value.toLowerCase(),i=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+t).concat(e.items.slice(0,e.activeItemIndex+t)):e.items).find(s=>{var a;return((a=s.dataRef.current.textValue)==null?void 0:a.startsWith(o))&&!s.dataRef.current.disabled}),n=i?e.items.indexOf(i):-1;return n===-1||n===e.activeItemIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeItemIndex:n,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,r)=>{let t=$(e,o=>[...o,{id:r.id,dataRef:r.dataRef}]);return{...e,...t}},6:(e,r)=>{let t=$(e,o=>{let i=o.findIndex(n=>n.id===r.id);return i!==-1&&o.splice(i,1),o});return{...e,...t,activationTrigger:1}}},_=p.createContext(null);_.displayName="MenuContext";function E(e){let r=p.useContext(_);if(r===null){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,E),t}return r}function Se(e,r){return Z(r.type,Fe,e,r)}let Be=p.Fragment;function Te(e,r){let{__demoMode:t=!1,...o}=e,i=p.useReducer(Se,{__demoMode:t,menuState:t?0:1,buttonRef:p.createRef(),itemsRef:p.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:n,itemsRef:s,buttonRef:a},d]=i,c=N(r);ie([a,s],(I,D)=>{var v;d({type:1}),ce(D,de.Loose)||(I.preventDefault(),(v=a.current)==null||v.focus())},n===0);let u=x(()=>{d({type:1})}),m=p.useMemo(()=>({open:n===0,close:u}),[n,u]),g={ref:c};return Q.createElement(_.Provider,{value:i},Q.createElement(se,{value:Z(n,{0:B.Open,1:B.Closed})},M({ourProps:g,theirProps:o,slot:m,defaultTag:Be,name:"Menu"})))}let Ne="button";function Me(e,r){var t;let o=q(),{id:i=`headlessui-menu-button-${o}`,...n}=e,[s,a]=E("Menu.Button"),d=N(s.buttonRef,r),c=ee(),u=x(v=>{switch(v.key){case b.Space:case b.Enter:case b.ArrowDown:v.preventDefault(),v.stopPropagation(),a({type:0}),c.nextFrame(()=>a({type:2,focus:h.First}));break;case b.ArrowUp:v.preventDefault(),v.stopPropagation(),a({type:0}),c.nextFrame(()=>a({type:2,focus:h.Last}));break}}),m=x(v=>{switch(v.key){case b.Space:v.preventDefault();break}}),g=x(v=>{if(me(v.currentTarget))return v.preventDefault();e.disabled||(s.menuState===0?(a({type:1}),c.nextFrame(()=>{var P;return(P=s.buttonRef.current)==null?void 0:P.focus({preventScroll:!0})})):(v.preventDefault(),a({type:0})))}),I=p.useMemo(()=>({open:s.menuState===0}),[s]),D={ref:d,id:i,type:ye(e,s.buttonRef),"aria-haspopup":"menu","aria-controls":(t=s.itemsRef.current)==null?void 0:t.id,"aria-expanded":s.menuState===0,onKeyDown:u,onKeyUp:m,onClick:g};return M({ourProps:D,theirProps:n,slot:I,defaultTag:Ne,name:"Menu.Button"})}let Ee="div",je=K.RenderStrategy|K.Static;function Oe(e,r){var t,o;let i=q(),{id:n=`headlessui-menu-items-${i}`,...s}=e,[a,d]=E("Menu.Items"),c=N(a.itemsRef,r),u=le(a.itemsRef),m=ee(),g=ue(),I=g!==null?(g&B.Open)===B.Open:a.menuState===0;p.useEffect(()=>{let l=a.itemsRef.current;l&&a.menuState===0&&l!==(u==null?void 0:u.activeElement)&&l.focus({preventScroll:!0})},[a.menuState,a.itemsRef,u]),he({container:a.itemsRef.current,enabled:a.menuState===0,accept(l){return l.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let D=x(l=>{var w,k;switch(m.dispose(),l.key){case b.Space:if(a.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),d({type:3,value:l.key});case b.Enter:if(l.preventDefault(),l.stopPropagation(),d({type:1}),a.activeItemIndex!==null){let{dataRef:y}=a.items[a.activeItemIndex];(k=(w=y.current)==null?void 0:w.domRef.current)==null||k.click()}te(a.buttonRef.current);break;case b.ArrowDown:return l.preventDefault(),l.stopPropagation(),d({type:2,focus:h.Next});case b.ArrowUp:return l.preventDefault(),l.stopPropagation(),d({type:2,focus:h.Previous});case b.Home:case b.PageUp:return l.preventDefault(),l.stopPropagation(),d({type:2,focus:h.First});case b.End:case b.PageDown:return l.preventDefault(),l.stopPropagation(),d({type:2,focus:h.Last});case b.Escape:l.preventDefault(),l.stopPropagation(),d({type:1}),A().nextFrame(()=>{var y;return(y=a.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})});break;case b.Tab:l.preventDefault(),l.stopPropagation(),d({type:1}),A().nextFrame(()=>{pe(a.buttonRef.current,l.shiftKey?H.Previous:H.Next)});break;default:l.key.length===1&&(d({type:3,value:l.key}),m.setTimeout(()=>d({type:4}),350));break}}),v=x(l=>{switch(l.key){case b.Space:l.preventDefault();break}}),P=p.useMemo(()=>({open:a.menuState===0}),[a]),C={"aria-activedescendant":a.activeItemIndex===null||(t=a.items[a.activeItemIndex])==null?void 0:t.id,"aria-labelledby":(o=a.buttonRef.current)==null?void 0:o.id,id:n,onKeyDown:D,onKeyUp:v,role:"menu",tabIndex:0,ref:c};return M({ourProps:C,theirProps:s,slot:P,defaultTag:Ee,features:je,visible:I,name:"Menu.Items"})}let $e=p.Fragment;function Ae(e,r){let t=q(),{id:o=`headlessui-menu-item-${t}`,disabled:i=!1,...n}=e,[s,a]=E("Menu.Item"),d=s.activeItemIndex!==null?s.items[s.activeItemIndex].id===o:!1,c=p.useRef(null),u=N(r,c);R(()=>{if(s.__demoMode||s.menuState!==0||!d||s.activationTrigger===0)return;let y=A();return y.requestAnimationFrame(()=>{var j,U;(U=(j=c.current)==null?void 0:j.scrollIntoView)==null||U.call(j,{block:"nearest"})}),y.dispose},[s.__demoMode,c,d,s.menuState,s.activationTrigger,s.activeItemIndex]);let m=Re(c),g=p.useRef({disabled:i,domRef:c,get textValue(){return m()}});R(()=>{g.current.disabled=i},[g,i]),R(()=>(a({type:5,id:o,dataRef:g}),()=>a({type:6,id:o})),[g,o]);let I=x(()=>{a({type:1})}),D=x(y=>{if(i)return y.preventDefault();a({type:1}),te(s.buttonRef.current)}),v=x(()=>{if(i)return a({type:2,focus:h.Nothing});a({type:2,focus:h.Specific,id:o})}),P=xe(),C=x(y=>P.update(y)),l=x(y=>{P.wasMoved(y)&&(i||d||a({type:2,focus:h.Specific,id:o,trigger:0}))}),w=x(y=>{P.wasMoved(y)&&(i||d&&a({type:2,focus:h.Nothing}))}),k=p.useMemo(()=>({active:d,disabled:i,close:I}),[d,i,I]);return M({ourProps:{id:o,ref:u,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,disabled:void 0,onClick:D,onFocus:v,onPointerEnter:C,onMouseEnter:C,onPointerMove:l,onMouseMove:l,onPointerLeave:w,onMouseLeave:w},theirProps:n,slot:k,defaultTag:$e,name:"Menu.Item"})}let qe=T(Te),_e=T(Me),Le=T(Oe),Ue=T(Ae),F=Object.assign(qe,{Button:_e,Items:Le,Item:Ue});const L=({label:e,options:r,icon:t})=>{const[o,i]=p.useState(!1),[n,s]=p.useState(null),a=()=>{var u,m;i(!1),(m=(u=r[n].dialogProps)==null?void 0:u.onClose)==null||m.call(u)},d=u=>{const m=r[u];m.onClick&&m.onClick(),m.onDialogOpen&&m.onDialogOpen(),m.dialogProps&&(s(u),i(!0))},c=n!==null?r[n].dialogProps:null;return f.jsxs("div",{className:"relative",children:[f.jsxs(F,{as:"div",className:"inline-block text-left",children:[f.jsx(F.Button,{as:"div",children:f.jsxs(O,{icon:ne,iconFlip:!0,variant:"secondary",children:[t?f.jsx(re,{icon:t}):null,e]})}),f.jsx(ve,{as:p.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:f.jsx(F.Items,{static:!0,className:"absolute left-0 mt-1 w-max divide-y divide-gray-100 overflow-hidden rounded-lg bg-brand-secondary py-1.5 focus:outline-none",children:f.jsx("div",{children:r.map((u,m)=>f.jsxs(p.Fragment,{children:[u.divider&&f.jsx("div",{className:"my-1.5 border-t border-ui-divider"}),f.jsx(F.Item,{children:({active:g})=>f.jsx("button",{disabled:u.disabled,className:`duration-50 bg-brand-secondary font-medium text-white transition-all ${g?"bg-ui-controls-button/60":""} ${u.disabled?"pointer-events-none opacity-40":""} group flex w-full items-center py-1.5 pl-7 pr-4 text-sm`.trim(),onClick:()=>d(m),children:f.jsxs("div",{className:"flex w-full",children:[f.jsx("div",{className:"grow text-start",children:u.label}),f.jsx("div",{className:"ml-10 font-normal text-white/75",children:u.description&&u.description})]})})})]},m))})})})]}),c&&f.jsxs(ge,{title:c.title,isOpen:o,onClose:a,className:c.className,children:[c.content,f.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[c.showClose!==!1&&c.closeButtonProps&&f.jsx(O,{variant:"secondary",...c.closeButtonProps,onClick:a,children:c.closeButtonProps.label}),c.confirmButtonProps&&f.jsx(O,{...c.confirmButtonProps,onClick:u=>{var m,g;(m=c.confirmButtonProps)!=null&&m.onClick&&((g=c.confirmButtonProps)==null||g.onClick(u)),a()},children:c.confirmButtonProps.label||"Confirm"})]})]})]})};L.__docgenInfo={description:"",methods:[],displayName:"ButtonDropdown",props:{label:{required:!0,tsType:{name:"string"},description:""},icon:{required:!1,tsType:{name:"IconDefinition"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  description?: string;
  onClick?: () => void;
  disabled?: boolean;
  divider?: boolean;
  onDialogOpen?: () => void;
  dialogProps?: {
    title: string;
    content: React.ReactNode;
    className?: string;
    confirmButtonProps?: UnionedButtonProps;
    closeButtonProps?: UnionedButtonProps;
    showClose?: boolean;
    onClose?: () => void;
  };
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"divider",value:{name:"boolean",required:!1}},{key:"onDialogOpen",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1}},{key:"dialogProps",value:{name:"signature",type:"object",raw:`{
  title: string;
  content: React.ReactNode;
  className?: string;
  confirmButtonProps?: UnionedButtonProps;
  closeButtonProps?: UnionedButtonProps;
  showClose?: boolean;
  onClose?: () => void;
}`,signature:{properties:[{key:"title",value:{name:"string",required:!0}},{key:"content",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!0}},{key:"className",value:{name:"string",required:!1}},{key:"confirmButtonProps",value:{name:"intersection",raw:"{ label?: string } & ButtonProps",elements:[{name:"signature",type:"object",raw:"{ label?: string }",signature:{properties:[{key:"label",value:{name:"string",required:!1}}]}},{name:"ButtonProps"}],required:!1}},{key:"closeButtonProps",value:{name:"intersection",raw:"{ label?: string } & ButtonProps",elements:[{name:"signature",type:"object",raw:"{ label?: string }",signature:{properties:[{key:"label",value:{name:"string",required:!1}}]}},{name:"ButtonProps"}],required:!1}},{key:"showClose",value:{name:"boolean",required:!1}},{key:"onClose",value:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}},required:!1}}]},required:!1}}]}}],raw:`Array<{
  label: string;
  description?: string;
  onClick?: () => void;
  disabled?: boolean;
  divider?: boolean;
  onDialogOpen?: () => void;
  dialogProps?: {
    title: string;
    content: React.ReactNode;
    className?: string;
    confirmButtonProps?: UnionedButtonProps;
    closeButtonProps?: UnionedButtonProps;
    showClose?: boolean;
    onClose?: () => void;
  };
}>`},description:""}}};const Ze={component:L,parameters:{actions:{handles:["click"]}},decorators:[be]},S={render:()=>f.jsx(L,{label:"File",icon:oe,options:[{label:"Label 1",description:"Desc 1",onDialogOpen:()=>{console.log("Opened Dialog")},dialogProps:{title:"Dialog Title 1",content:f.jsx("div",{className:"text-white",children:"Opened dialog."}),confirmButtonProps:{label:"Create",disabled:!1,onClick:()=>{console.log("Action on Dialog")}},closeButtonProps:{label:"Cancel"},showClose:!0,onClose:()=>{console.log("Closed Dialog")}}}]})};var X,Y,z;S.parameters={...S.parameters,docs:{...(X=S.parameters)==null?void 0:X.docs,source:{originalSource:`{
  render: () => <ButtonDropdown label="File" icon={faFile} options={[{
    label: "Label 1",
    description: "Desc 1",
    onDialogOpen: () => {
      console.log("Opened Dialog");
    },
    dialogProps: {
      title: "Dialog Title 1",
      content: <div className="text-white">Opened dialog.</div>,
      confirmButtonProps: {
        label: "Create",
        disabled: false,
        onClick: () => {
          console.log("Action on Dialog");
        }
      },
      closeButtonProps: {
        label: "Cancel"
      },
      showClose: true,
      onClose: () => {
        console.log("Closed Dialog");
      }
    }
  }]} />
}`,...(z=(Y=S.parameters)==null?void 0:Y.docs)==null?void 0:z.source}}};const et=["Default"];export{S as Default,et as __namedExportsOrder,Ze as default};
